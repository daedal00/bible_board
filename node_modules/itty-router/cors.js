"use strict";exports.cors=(e={})=>{const{origin:s="*",credentials:o=!1,allowMethods:r="*",allowHeaders:c,exposeHeaders:t,maxAge:a}=e,n=e=>{const r=e?.headers.get("origin");return!0===s?r:s instanceof RegExp?s.test(r)?r:void 0:Array.isArray(s)?s.includes(r)?r:void 0:s instanceof Function?s(r):"*"==s&&o?r:s},l=(e,s)=>{for(const[o,r]of Object.entries(s))r&&e.headers.append(o,r);return e};return{corsify:(e,s)=>e?.headers?.get("access-control-allow-origin")||101==e.status?e:l(e,{"access-control-allow-origin":n(s),"access-control-allow-credentials":o}),preflight:e=>{if("OPTIONS"==e.method){const s=new Response(null,{status:204});return l(s,{"access-control-allow-origin":n(e),"access-control-allow-methods":r?.join?.(",")??r,"access-control-expose-headers":t?.join?.(",")??t,"access-control-allow-headers":c?.join?.(",")??c??e.headers.get("access-control-request-headers"),"access-control-max-age":a,"access-control-allow-credentials":o})}}}};
//# sourceMappingURL=cors.js.map
